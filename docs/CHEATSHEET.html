<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Agent Flywheel Cheat Sheet</title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-purple: #a371f7;
            --accent-orange: #d29922;
            --accent-red: #f85149;
            --accent-pink: #db61a2;
            --accent-cyan: #39c5cf;
            --border-color: #30363d;
            --code-bg: #1a1f26;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            text-align: center;
        }
        .subtitle { text-align: center; color: var(--text-secondary); margin-bottom: 2rem; font-size: 1.1rem; }
        .verified { background: rgba(63,185,80,0.2); color: var(--accent-green); padding: 0.5rem 1rem; border-radius: 8px; text-align: center; margin-bottom: 2rem; font-size: 0.9rem; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(420px, 1fr)); gap: 1.5rem; }
        .card { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; padding: 1.5rem; }
        .card h2 { font-size: 1.3rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; }
        .card h2 .icon { font-size: 1.5rem; }
        .card.blue h2 { color: var(--accent-blue); }
        .card.green h2 { color: var(--accent-green); }
        .card.purple h2 { color: var(--accent-purple); }
        .card.orange h2 { color: var(--accent-orange); }
        .card.pink h2 { color: var(--accent-pink); }
        .card.red h2 { color: var(--accent-red); }
        .card.cyan h2 { color: var(--accent-cyan); }
        h3 { font-size: 0.9rem; color: var(--text-secondary); margin: 1rem 0 0.5rem 0; text-transform: uppercase; letter-spacing: 0.05em; }
        pre { background: var(--code-bg); border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; overflow-x: auto; font-family: "SF Mono", "Fira Code", monospace; font-size: 0.85rem; margin: 0.5rem 0; }
        code { font-family: "SF Mono", "Fira Code", monospace; background: var(--code-bg); padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.85rem; }
        .cmd { color: var(--accent-green); }
        .arg { color: var(--accent-blue); }
        .flag { color: var(--accent-orange); }
        .str { color: var(--accent-pink); }
        .cmt { color: var(--text-secondary); }
        table { width: 100%; border-collapse: collapse; margin: 0.5rem 0; font-size: 0.9rem; }
        th, td { padding: 0.6rem; text-align: left; border-bottom: 1px solid var(--border-color); }
        th { color: var(--text-secondary); font-weight: 600; text-transform: uppercase; font-size: 0.75rem; }
        .tag { display: inline-block; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        .tag.blue { background: rgba(88,166,255,0.2); color: var(--accent-blue); }
        .tag.green { background: rgba(63,185,80,0.2); color: var(--accent-green); }
        .tag.purple { background: rgba(163,113,247,0.2); color: var(--accent-purple); }
        .tag.orange { background: rgba(210,153,34,0.2); color: var(--accent-orange); }
        .tag.cyan { background: rgba(57,197,207,0.2); color: var(--accent-cyan); }
        kbd { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 4px; padding: 0.2rem 0.5rem; font-family: inherit; font-size: 0.8rem; }
        .full-width { grid-column: 1 / -1; }
        .quick-ref { background: linear-gradient(135deg, rgba(88,166,255,0.1), rgba(163,113,247,0.1)); border: 1px solid var(--accent-blue); }
        .flywheel-ref { background: linear-gradient(135deg, rgba(57,197,207,0.1), rgba(63,185,80,0.1)); border: 1px solid var(--accent-cyan); }
        .workflow-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .step { display: flex; align-items: flex-start; gap: 0.75rem; }
        .step-num { background: var(--accent-purple); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; flex-shrink: 0; }
        .step-num.cyan { background: var(--accent-cyan); }
        @media (max-width: 900px) { .grid { grid-template-columns: 1fr; } body { padding: 1rem; } }
    </style>
</head>
<body>
    <h1>üéÆ Agent Flywheel Cheat Sheet</h1>
    <p class="subtitle">Flywheel-Lite Workflow ‚Ä¢ Background Execution ‚Ä¢ Beads Task Management</p>
    <div class="verified">‚úÖ All commands verified ‚Ä¢ Updated Feb 2026</div>
    
    <div class="grid">
        <!-- FLYWHEEL-LITE WORKFLOW -->
        <div class="card flywheel-ref full-width cyan">
            <h2><span class="icon">üåÄ</span> Flywheel-Lite Workflow</h2>
            <div class="workflow-grid">
                <div class="step"><span class="step-num cyan">1</span><div><code>flywheel doctor</code><br><span class="cmt">Verify setup</span></div></div>
                <div class="step"><span class="step-num cyan">2</span><div><code>cd /data/projects/myrepo</code></div></div>
                <div class="step"><span class="step-num cyan">3</span><div><code>flywheel init</code><br><span class="cmt">Bootstrap</span></div></div>
                <div class="step"><span class="step-num cyan">4</span><div><code>flywheel plan --rounds 2</code><br><span class="cmt">Interview</span></div></div>
                <div class="step"><span class="step-num cyan">5</span><div><code>flywheel refine --iters 3 --bg</code><br><span class="cmt">Background refine</span></div></div>
                <div class="step"><span class="step-num cyan">6</span><div><code>flywheel beads</code><br><span class="cmt">Plan ‚Üí Tasks</span></div></div>
                <div class="step"><span class="step-num cyan">7</span><div><code>flywheel startwork --cc 3</code><br><span class="cmt">Spawn swarm</span></div></div>
                <div class="step"><span class="step-num cyan">8</span><div><code>ntm attach myrepo</code><br><span class="cmt">Work</span></div></div>
            </div>
        </div>

        <!-- FLYWHEEL COMMANDS -->
        <div class="card cyan">
            <h2><span class="icon">üåÄ</span> Flywheel Commands</h2>
            <h3>Setup</h3>
            <pre><span class="cmd">flywheel doctor</span>              <span class="cmt"># Verify tools</span>
<span class="cmd">flywheel init</span>                 <span class="cmt"># Bootstrap repo</span>
<span class="cmd">flywheel checkout</span> <span class="arg">feat/x</span> main</pre>
            
            <h3>Planning</h3>
            <pre><span class="cmd">flywheel plan</span> <span class="flag">--rounds 2</span>
<span class="cmd">flywheel refine</span> <span class="flag">--iters 3</span>      <span class="cmt"># Foreground</span>
<span class="cmd">flywheel refine</span> <span class="flag">--iters 3 --bg</span> <span class="cmt"># Background</span>
<span class="cmd">flywheel beads</span> <span class="flag">--min-beads 50</span></pre>
            
            <h3>Execution</h3>
            <pre><span class="cmd">flywheel startwork</span> <span class="flag">--cc 3 --cod 2 --gmi 1</span></pre>
        </div>

        <!-- BACKGROUND JOBS -->
        <div class="card cyan">
            <h2><span class="icon">‚è≥</span> Background Jobs (NEW)</h2>
            <h3>Run Refine in Background</h3>
            <pre><span class="cmd">flywheel refine</span> <span class="flag">--iters 3 --bg</span>
<span class="cmt"># Returns immediately, runs in tmux</span></pre>
            
            <h3>Manage Jobs</h3>
            <pre><span class="cmd">flywheel jobs</span>                 <span class="cmt"># List jobs</span>
<span class="cmd">flywheel logs</span> <span class="arg">refine-repo-123</span> <span class="cmt"># Tail log</span>
<span class="cmd">flywheel attach</span> <span class="arg">refine-repo-123</span> <span class="cmt"># Attach</span></pre>
            
            <h3>Run Multiple Simultaneously</h3>
            <pre><span class="cmd">cd</span> /data/projects/proj1
<span class="cmd">flywheel refine</span> <span class="flag">--bg</span>
<span class="cmd">cd</span> /data/projects/proj2
<span class="cmd">flywheel refine</span> <span class="flag">--bg</span>
<span class="cmd">flywheel jobs</span>  <span class="cmt"># See both running</span></pre>
        </div>

        <!-- VIEWING BEADS -->
        <div class="card pink">
            <h2><span class="icon">üëÅÔ∏è</span> Viewing Beads</h2>
            <h3>List All Beads</h3>
            <pre><span class="cmd">br list</span>                       <span class="cmt"># All issues</span>
<span class="cmd">br list</span> <span class="flag">--status=open</span>          <span class="cmt"># Open only</span>
<span class="cmd">br list</span> <span class="flag">--status=in_progress</span>   <span class="cmt"># In progress</span>
<span class="cmd">br list</span> <span class="flag">-t epic</span>                <span class="cmt"># Epics only</span>
<span class="cmd">br list</span> <span class="flag">-t task</span>                <span class="cmt"># Tasks only</span></pre>
            
            <h3>Ready / Blocked</h3>
            <pre><span class="cmd">br ready</span>                      <span class="cmt"># Unblocked, ready</span>
<span class="cmd">br ready</span> <span class="flag">--limit 0</span>             <span class="cmt"># All ready</span>
<span class="cmd">br blocked</span>                    <span class="cmt"># Blocked issues</span></pre>
            
            <h3>View Details</h3>
            <pre><span class="cmd">br show</span> <span class="arg">bd-abc123</span>             <span class="cmt"># Single bead</span>
<span class="cmd">br show</span> <span class="arg">bd-abc bd-def</span>         <span class="cmt"># Multiple</span>
<span class="cmd">br graph</span> <span class="flag">--all</span>                 <span class="cmt"># Dependency graph</span>
<span class="cmd">br graph</span> <span class="arg">bd-abc</span>                <span class="cmt"># Graph from root</span></pre>
            
            <h3>Interactive TUI</h3>
            <pre><span class="cmd">bv</span>                            <span class="cmt"># Full board TUI</span></pre>
        </div>

        <!-- WORKING WITH BEADS -->
        <div class="card pink">
            <h2><span class="icon">üìã</span> Working with Beads</h2>
            <h3>Create</h3>
            <pre><span class="cmd">br create</span> <span class="str">"Task title"</span> <span class="flag">-t</span> task <span class="flag">-p</span> 2
<span class="cmd">br create</span> <span class="str">"Bug title"</span> <span class="flag">-t</span> bug <span class="flag">-p</span> 1
<span class="cmd">br create</span> <span class="str">"Epic"</span> <span class="flag">-t</span> epic <span class="flag">-p</span> 0
<span class="cmd">br q</span> <span class="str">"Quick note"</span>              <span class="cmt"># Fast capture</span></pre>
            
            <h3>Priority: 0=Critical ‚Üí 4=Backlog</h3>
            
            <h3>Update Status</h3>
            <pre><span class="cmd">br update</span> <span class="arg">bd-xxx</span> <span class="flag">--status=in_progress</span>
<span class="cmd">br update</span> <span class="arg">bd-xxx</span> <span class="flag">--status=blocked</span>
<span class="cmd">br close</span> <span class="arg">bd-xxx</span>
<span class="cmd">br reopen</span> <span class="arg">bd-xxx</span></pre>
            
            <h3>Dependencies</h3>
            <pre><span class="cmd">br dep add</span> <span class="arg">bd-child</span> <span class="arg">bd-parent</span> <span class="cmt"># child depends on parent</span>
<span class="cmd">br dep list</span> <span class="arg">bd-xxx</span>
<span class="cmd">br dep tree</span> <span class="arg">bd-xxx</span></pre>
            
            <h3>AI Triage</h3>
            <pre><span class="cmd">bv</span> <span class="flag">--robot-triage</span>             <span class="cmt"># JSON priorities</span>
<span class="cmd">bv</span> <span class="flag">--robot-next</span>               <span class="cmt"># Top pick only</span></pre>
        </div>

        <!-- SPAWNING -->
        <div class="card green">
            <h2><span class="icon">üöÄ</span> Spawn Agents</h2>
            <pre><span class="cmd">ntm spawn</span> <span class="arg">myrepo</span> <span class="flag">--cc=2</span>
<span class="cmd">ntm spawn</span> <span class="arg">myrepo</span> <span class="flag">--cc=2 --cod=1 --gmi=1</span></pre>
            
            <h3>Agent Flags</h3>
            <table>
                <tr><td><span class="tag purple">Claude</span></td><td><code>--cc=N</code></td></tr>
                <tr><td><span class="tag green">Codex</span></td><td><code>--cod=N</code></td></tr>
                <tr><td><span class="tag orange">Gemini</span></td><td><code>--gmi=N</code></td></tr>
            </table>
        </div>

        <!-- SENDING PROMPTS -->
        <div class="card orange">
            <h2><span class="icon">üì®</span> Send Prompts</h2>
            <pre><span class="cmd">ntm send</span> <span class="arg">myrepo</span> <span class="str">"prompt"</span>       <span class="cmt"># All agents</span>
<span class="cmd">ntm send</span> <span class="arg">myrepo</span> <span class="flag">--pane=2</span> <span class="str">"msg"</span> <span class="cmt"># Specific pane</span>
<span class="cmd">ntm send</span> <span class="arg">myrepo</span> <span class="flag">--cc=</span> <span class="str">"msg"</span>    <span class="cmt"># Claude only</span>
<span class="cmd">echo</span> <span class="str">"msg"</span> | <span class="cmd">ntm send</span> <span class="arg">myrepo</span>  <span class="cmt"># Via pipe</span>
<span class="cmd">ntm interrupt</span> <span class="arg">myrepo</span>          <span class="cmt"># Stop all</span></pre>
        </div>

        <!-- SESSION MANAGEMENT -->
        <div class="card purple">
            <h2><span class="icon">üñ•Ô∏è</span> Sessions</h2>
            <pre><span class="cmd">ntm list</span>                       <span class="cmt"># All sessions</span>
<span class="cmd">ntm status</span> <span class="arg">myrepo</span>              <span class="cmt"># Detailed info</span>
<span class="cmd">ntm attach</span> <span class="arg">myrepo</span>              <span class="cmt"># Enter</span>
<span class="cmd">ntm view</span> <span class="arg">myrepo</span>                <span class="cmt"># Tile panes</span>
<span class="cmd">echo</span> y | <span class="cmd">ntm kill</span> <span class="arg">myrepo</span>      <span class="cmt"># Kill</span></pre>
            
            <h3>Tmux Hotkeys</h3>
            <table>
                <tr><td><kbd>Ctrl+b</kbd> <kbd>d</kbd></td><td>Detach</td></tr>
                <tr><td><kbd>Ctrl+b</kbd> <kbd>z</kbd></td><td>Zoom pane</td></tr>
                <tr><td><kbd>Ctrl+b</kbd> <kbd>[</kbd></td><td>Scroll</td></tr>
            </table>
        </div>

        <!-- MEMORY -->
        <div class="card red">
            <h2><span class="icon">üß†</span> Memory & Scan</h2>
            <pre><span class="cmd">cm context</span> <span class="str">"task"</span>      <span class="cmt"># Get context</span>
<span class="cmd">cm reflect</span>              <span class="cmt"># Extract learnings</span>
<span class="cmd">cass search</span> <span class="str">"query"</span>    <span class="cmt"># Search history</span>
<span class="cmd">ubs .</span>                  <span class="cmt"># Scan codebase</span></pre>
        </div>

        <!-- TROUBLESHOOTING -->
        <div class="card red full-width">
            <h2><span class="icon">üîß</span> Troubleshooting</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                <div>
                    <h3>Session Name = Dir Name</h3>
                    <pre><span class="cmd">cd</span> /data/projects/<span class="arg">myrepo</span>
<span class="cmd">ntm spawn</span> <span class="arg">myrepo</span> <span class="flag">--cc=2</span></pre>
                </div>
                <div>
                    <h3>ntm send Race Condition</h3>
                    <pre><span class="cmt"># Wait 3s or use --pane=N</span>
<span class="cmd">ntm send</span> <span class="arg">myrepo</span> <span class="flag">--pane=2</span> <span class="str">"msg"</span></pre>
                </div>
                <div>
                    <h3>View Background Job Log</h3>
                    <pre><span class="cmd">flywheel logs</span>
<span class="cmt"># Or:</span>
<span class="cmd">tail -f</span> planning/.refine-*.log</pre>
                </div>
                <div>
                    <h3>Kill Stuck Job</h3>
                    <pre><span class="cmd">tmux kill-session -t</span> <span class="arg">refine-xxx</span></pre>
                </div>
            </div>
        </div>

        <!-- KEY SYNTAX -->
        <div class="card orange full-width">
            <h2><span class="icon">‚ö†Ô∏è</span> Key Syntax</h2>
            <table>
                <tr><th>Action</th><th>‚úÖ Correct</th><th>‚ùå Wrong</th></tr>
                <tr><td>Background refine</td><td><code>flywheel refine --bg</code></td><td><code>flywheel refine &</code></td></tr>
                <tr><td>Send to Claude</td><td><code>ntm send S --cc= "msg"</code></td><td><code>ntm send S --cc "msg"</code></td></tr>
                <tr><td>List beads</td><td><code>br list</code></td><td><code>bd list</code> (unless symlinked)</td></tr>
                <tr><td>Session name</td><td><code>ntm spawn myrepo</code></td><td><code>ntm spawn myrepo-work</code></td></tr>
            </table>
        </div>
    </div>
    
    <footer style="text-align: center; margin-top: 2rem; color: var(--text-secondary); font-size: 0.85rem;">
        ‚úÖ Flywheel-Lite + Agent Flywheel v0.5.0 ‚Ä¢ <a href="https://github.com/urgood2/flywheel-lite" style="color: var(--accent-cyan);">GitHub</a>
    </footer>
</body>
</html>
